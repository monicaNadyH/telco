!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.sinonTest=n()}(this,function(){"use strict";function t(t,n,e){if(n){if(t.restore(),e)return;throw n}t.verifyAndRestore()}function n(n,e){return e&&y.isPromise(e)?e.then(function(e){return t(n),e},function(e){t(n,e||Error("Promise rejected with no/falsy error"))}):(t(n),e)}function e(n,e,o){e&&y.isPromise(e)&&t(n,Error("Your test should take a callback *or* return a promise. It should not do both.")),o||t(n)}function o(o,r){function i(n,e,i,c){r=h(r),r.injectInto=r.injectIntoThis&&n||r.injectInto;var s,f=o.sandbox.create(r),u=e.length&&e[e.length-1];"function"==typeof u&&(e[e.length-1]=function(n){t(f,n,!0),u(n)});try{s=i.apply(n,e.concat(f.args))}catch(n){t(f,n)}return c(f,s,"function"==typeof u)}if(!y.isSinon(o))throw new TypeError("expected sinon object");return function(t){var o=typeof t;if("function"!==o)throw new TypeError("sinon.test needs to wrap a test function, got "+o);return t.length?function(n){return i(this,l.call(arguments),t,e)}:function(){return i(this,l.call(arguments),t,n)}}}function r(t,n,e){return function(){n&&n.apply(this,arguments);var o,r;try{r=t.apply(this,arguments)}catch(t){o=t}if(e&&e.apply(this,arguments),o)throw o;return r}}function i(t,n){var e=w.configure(t,n);return function(t,n){if(!t||"object"!=typeof t)throw new TypeError("sinon-test.testCase needs an object with test functions");n=n||"test";var o,i,c,s=RegExp("^"+n),f={},u=t.setUp,a=t.tearDown;for(o in t)t.hasOwnProperty(o)&&!/^(setUp|tearDown)$/.test(o)&&(i=t[o],"function"==typeof i&&s.test(o)?(c=i,(u||a)&&(c=r(i,u,a)),f[o]=e(c)):f[o]=t[o]);return f}}var c=function(t){return"object"==typeof t&&"function"==typeof t.then},s=function(t){return!!t&&"object"==typeof t&&"function"==typeof t.getConfig&&!!t.sandbox&&"object"==typeof t.sandbox&&"function"==typeof t.sandbox.create},f={isPromise:c,isSinon:s},u={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},a=u,p=function(t){var n,e={};t=t||{};for(n in a)a.hasOwnProperty(n)&&(e[n]=t.hasOwnProperty(n)?t[n]:a[n]);return e},y=f,h=p,l=Array.prototype.slice,d=o,g={configure:d},w=g;return{configureTest:g.configure,configureTestCase:{configure:i}.configure}});
